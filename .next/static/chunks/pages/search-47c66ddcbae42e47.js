(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(9505)}])},8662:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var r=t(5893),s=t(3299),a=t(9008),l=t.n(a),i=t(1664),c=t.n(i),o=t(1955),d=t(7294),u=t(2920),h=t(6272),x=(t(993),t(8766)),m=t(1799),f=t(9396),p=t(9534);function j(e){var n=e.href,t=e.children,s=(0,p.Z)(e,["href","children"]);return(0,r.jsx)(c(),{href:n,children:(0,r.jsx)("a",(0,f.Z)((0,m.Z)({},s),{children:t}))})}var v=t(1163),g=t(3737);function b(e){var n=e.title,t=e.children,a=(0,s.useSession)(),i=a.status,m=a.data,f=(0,d.useContext)(x.y),p=f.state,b=f.dispatch,N=p.cart,w=(0,d.useState)(0),y=w[0],k=w[1];(0,d.useEffect)((function(){k(N.cartItems.reduce((function(e,n){return e+n.quantity}),0))}),[N.cartItems]);var C=(0,d.useState)(""),_=C[0],A=C[1],Z=(0,v.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:n?n+" - Autoparts":"Autoparts"}),(0,r.jsx)("meta",{name:"description",content:"Ecommerce Website"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(u.Ix,{position:"bottom-center",limit:1}),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col justify-between sticky ",children:[(0,r.jsx)("header",{className:"",children:(0,r.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("a",{className:"text-lg font-bold",children:"Autoparts"})}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Z.push("/search?query=".concat(_))},className:"mx-auto hidden justify-center md:flex",children:[(0,r.jsx)("input",{onChange:function(e){return A(e.target.value)},type:"text",className:"rounded-tr-none rounded-br-none p-1 text-sm focus:ring-0",placeholder:"Search products"}),(0,r.jsx)("button",{className:"rounded rounded-tl-none rounded-bl-none bg-amber-300 p-1 text-sm dark:text-black",type:"submit",id:"button-addon2",children:(0,r.jsx)(g.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c(),{href:"/cart",children:(0,r.jsxs)("a",{className:"p-2",children:["Cart",y>0&&(0,r.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:y})]})}),"loading"===i?"Loading":(null===m||void 0===m?void 0:m.user)?(0,r.jsxs)(h.v,{as:"div",className:"relative inline-block ",children:[(0,r.jsx)(h.v.Button,{className:"text-blue-600 ",children:m.user.name}),(0,r.jsxs)(h.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-gray-400 shadow-lg ",children:[(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/profile",children:"Profile"})}),(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/order-history",children:"Order History"})}),m.user.isAdmin&&(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/admin/dashboard",children:"Admin Dashboard"})}),(0,r.jsx)(h.v.Item,{children:(0,r.jsx)("a",{className:"dropdown-link hover:text-white",href:"#",onClick:function(){o.Z.remove("cart"),b({type:"CART_RESET"}),(0,s.signOut)({callbackUrl:"/login"})},children:"Logout"})})]})]}):(0,r.jsx)(c(),{href:"/login",children:(0,r.jsx)("a",{className:"p-2",children:"Login"})})]})]})}),(0,r.jsx)("main",{className:"container m-auto mt-4 px-4",children:t}),(0,r.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,r.jsx)("p",{children:"Copyright \xa9 2022 Autoparts"})})]})]})}},934:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(5893),s=t(1664),a=t.n(s);t(7294);function l(e){var n=e.product,t=e.addToCartHandler;return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(a(),{href:"/product/".concat(n.slug),children:(0,r.jsx)("a",{children:(0,r.jsx)("img",{src:n.image,alt:n.name,className:"rounded shadow object-cover h-64 w-full"})})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-5",children:[(0,r.jsx)(a(),{href:"/product/".concat(n.slug),children:(0,r.jsx)("a",{children:(0,r.jsx)("h2",{className:"text-lg",children:n.name})})}),(0,r.jsx)("p",{className:"mb-2",children:n.brand}),(0,r.jsxs)("p",{children:["$",n.price]}),(0,r.jsx)("button",{className:"primary-button",type:"button",onClick:function(){return t(n)},children:"Add to cart"})]})]})}},9505:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return b},default:function(){return N}});var r=t(7568),s=t(1799),a=t(9396),l=t(9815),i=t(4051),c=t.n(i),o=t(5893),d=t(8945),u=t(1163),h=t(7294),x=t(2920),m=t(8662),f=t(8766),p=t(9965),j=t(934),v=[{name:"$1 to $50",value:"1-50"},{name:"$51 to $200",value:"51-200"},{name:"$201 to $1000",value:"201-1000"}],g=[1,2,3,4,5],b=!0;function N(e){var n=(0,u.useRouter)(),t=n.query,i=t.query,b=void 0===i?"all":i,N=t.category,w=void 0===N?"all":N,y=t.brand,k=void 0===y?"all":y,C=t.price,_=void 0===C?"all":C,A=t.rating,Z=void 0===A?"all":A,E=t.sort,I=void 0===E?"featured":E,S=t.page,P=void 0===S?1:S,R=e.products,q=e.countProducts,T=e.categories,L=e.brands,$=e.pages,H=function(e){var t=e.page,r=e.category,s=e.brand,a=e.sort,l=e.min,i=e.max,c=e.searchQuery,o=e.price,d=e.rating,u=n.query;t&&(u.page=t),c&&(u.searchQuery=c),a&&(u.sort=a),r&&(u.category=r),s&&(u.brand=s),o&&(u.price=o),d&&(u.rating=d),l&&(u.min,u.min),i&&(u.max,u.max),n.push({pathname:n.pathname,query:u})},O=(0,h.useContext)(f.y),D=O.state,B=O.dispatch,F=function(){var e=(0,r.Z)(c().mark((function e(t){var r,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D.cart.cartItems.find((function(e){return e._id===t._id})),l=r?r.quantity+1:1,e.next=4,d.Z.get("/api/products/".concat(t._id));case 4:if(!(e.sent.data.countInStock<l)){e.next=8;break}return x.Am.error("Sorry. Product is out of stock"),e.abrupt("return");case 8:B({type:"CART_ADD_ITEM",payload:(0,a.Z)((0,s.Z)({},t),{quantity:l})}),n.push("/cart");case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.jsx)(m.Z,{title:"search",children:(0,o.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"my-3",children:[(0,o.jsx)("h2",{children:"Categories"}),(0,o.jsxs)("select",{className:"w-full",value:w,onChange:function(e){H({category:e.target.value})},children:[(0,o.jsx)("option",{value:"all",children:"All"}),T&&T.map((function(e){return(0,o.jsx)("option",{value:e,children:e},e)}))]})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("h2",{children:"Brands"}),(0,o.jsxs)("select",{className:"w-full",value:k,onChange:function(e){H({brand:e.target.value})},children:[(0,o.jsx)("option",{value:"all",children:"All"}),L&&L.map((function(e){return(0,o.jsx)("option",{value:e,children:e},e)}))]})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("h2",{children:"Prices"}),(0,o.jsxs)("select",{className:"w-full",value:_,onChange:function(e){H({price:e.target.value})},children:[(0,o.jsx)("option",{value:"all",children:"All"}),v&&v.map((function(e){return(0,o.jsx)("option",{value:e.value,children:e.name},e.value)}))]})]}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("h2",{children:"Ratings"}),(0,o.jsxs)("select",{className:"w-full",value:Z,onChange:function(e){H({rating:e.target.value})},children:[(0,o.jsx)("option",{value:"all",children:"All"}),g&&g.map((function(e){return(0,o.jsxs)("option",{value:e,children:[e," star",e>1&&"s"," & up"]},e)}))]})]})]}),(0,o.jsxs)("div",{className:"md:col-span-3",children:[(0,o.jsxs)("div",{className:"mb-2 flex items-center justify-between border-b-2 pb-2",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[0===R.length?"No":q," Results","all"!==b&&""!==b&&" : "+b,"all"!==w&&" : "+w,"all"!==k&&" : "+k,"all"!==_&&" : Price "+_,"all"!==Z&&" : Rating "+Z+" & up","\xa0","all"!==b&&""!==b||"all"!==w||"all"!==k||"all"!==Z||"all"!==_?(0,o.jsx)("button",{onClick:function(){return n.push("/search")},children:(0,o.jsx)(p.Z,{className:"h-5 w-5"})}):null]}),(0,o.jsxs)("div",{children:["Sort by"," ",(0,o.jsxs)("select",{value:I,onChange:function(e){H({sort:e.target.value})},children:[(0,o.jsx)("option",{value:"featured",children:"Featured"}),(0,o.jsx)("option",{value:"lowest",children:"Price: Low to High"}),(0,o.jsx)("option",{value:"highest",children:"Price: High to Low"}),(0,o.jsx)("option",{value:"toprated",children:"Customer Reviews"}),(0,o.jsx)("option",{value:"newest",children:"Newest Arrivals"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 ",children:R.map((function(e){return(0,o.jsx)(j.Z,{product:e,addToCartHandler:F},e._id)}))}),(0,o.jsx)("ul",{className:"flex",children:R.length>0&&(0,l.Z)(Array($).keys()).map((function(e){return(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"default-button m-2 ".concat(P==e+1?"font-bold":""," "),onClick:function(){return function(e){H({page:e})}(e+1)},children:e+1})},e)}))})]})]})]})})}},9965:function(e,n,t){"use strict";var r=t(7294);const s=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}))}));n.Z=s}},function(e){e.O(0,[956,540,774,888,179],(function(){return n=2774,e(e.s=n);var n}));var n=e.O();_N_E=n}]);