(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{7864:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return n(7692)}])},2913:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);n(7294);function s(e){var t=e.activeStep,n=void 0===t?0:t;return(0,r.jsx)("div",{className:"mb-5 flex flex-wrap",children:["User Login","Shipping Address","Payment Method","Place Order"].map((function(e,t){return(0,r.jsx)("div",{className:"flex-1 border-b-2  \n            text-center \n         ".concat(t<=n?"border-indigo-500   text-indigo-500":"border-gray-400 text-gray-400","\n            \n         "),children:e},e)}))})}},8662:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(5893),s=n(3299),i=n(9008),a=n.n(i),c=n(1664),o=n.n(c),d=n(1955),l=n(7294),u=n(2920),h=n(6272),m=(n(993),n(8766)),x=n(1799),f=n(9396),p=n(9534);function j(e){var t=e.href,n=e.children,s=(0,p.Z)(e,["href","children"]);return(0,r.jsx)(o(),{href:t,children:(0,r.jsx)("a",(0,f.Z)((0,x.Z)({},s),{children:n}))})}var v=n(1163),b=n(3737);function N(e){var t=e.title,n=e.children,i=(0,s.useSession)(),c=i.status,x=i.data,f=(0,l.useContext)(m.y),p=f.state,N=f.dispatch,y=p.cart,g=(0,l.useState)(0),w=g[0],k=g[1];(0,l.useEffect)((function(){k(y.cartItems.reduce((function(e,t){return e+t.quantity}),0))}),[y.cartItems]);var _=(0,l.useState)(""),S=_[0],E=_[1],A=(0,v.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:t?t+" - Autoparts":"Autoparts"}),(0,r.jsx)("meta",{name:"description",content:"Ecommerce Website"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(u.Ix,{position:"bottom-center",limit:1}),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col justify-between sticky ",children:[(0,r.jsx)("header",{className:"",children:(0,r.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)("a",{className:"text-lg font-bold",children:"Autoparts"})}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),A.push("/search?query=".concat(S))},className:"mx-auto hidden justify-center md:flex",children:[(0,r.jsx)("input",{onChange:function(e){return E(e.target.value)},type:"text",className:"rounded-tr-none rounded-br-none p-1 text-sm focus:ring-0",placeholder:"Search products"}),(0,r.jsx)("button",{className:"rounded rounded-tl-none rounded-bl-none bg-amber-300 p-1 text-sm dark:text-black",type:"submit",id:"button-addon2",children:(0,r.jsx)(b.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o(),{href:"/cart",children:(0,r.jsxs)("a",{className:"p-2",children:["Cart",w>0&&(0,r.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:w})]})}),"loading"===c?"Loading":(null===x||void 0===x?void 0:x.user)?(0,r.jsxs)(h.v,{as:"div",className:"relative inline-block ",children:[(0,r.jsx)(h.v.Button,{className:"text-blue-600 ",children:x.user.name}),(0,r.jsxs)(h.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-gray-400 shadow-lg ",children:[(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/profile",children:"Profile"})}),(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/order-history",children:"Order History"})}),x.user.isAdmin&&(0,r.jsx)(h.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link hover:text-white",href:"/admin/dashboard",children:"Admin Dashboard"})}),(0,r.jsx)(h.v.Item,{children:(0,r.jsx)("a",{className:"dropdown-link hover:text-white",href:"#",onClick:function(){d.Z.remove("cart"),N({type:"CART_RESET"}),(0,s.signOut)({callbackUrl:"/login"})},children:"Logout"})})]})]}):(0,r.jsx)(o(),{href:"/login",children:(0,r.jsx)("a",{className:"p-2",children:"Login"})})]})]})}),(0,r.jsx)("main",{className:"container m-auto mt-4 px-4",children:n}),(0,r.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,r.jsx)("p",{children:"Copyright \xa9 2022 Autoparts"})})]})]})}},7692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(1799),s=n(9396),i=n(5893),a=n(1163),c=n(7294),o=n(2920),d=n(1955),l=n(2913),u=n(8662),h=n(8766);function m(){var e=(0,c.useState)(""),t=e[0],n=e[1],m=(0,c.useContext)(h.y),x=m.state,f=m.dispatch,p=x.cart,j=p.shippingAddress,v=p.paymentMethod,b=(0,a.useRouter)();return(0,c.useEffect)((function(){if(!j.address)return b.push("/shipping");n(v||"")}),[v,b,j.address]),(0,i.jsxs)(u.Z,{title:"Payment Method",children:[(0,i.jsx)(l.Z,{activeStep:2}),(0,i.jsxs)("form",{className:"mx-auto max-w-screen-md",onSubmit:function(e){if(e.preventDefault(),!t)return o.Am.error("Payment method is required");f({type:"SAVE_PAYMENT_METHOD",payload:t}),d.Z.set("cart",JSON.stringify((0,s.Z)((0,r.Z)({},p),{paymentMethod:t}))),b.push("/placeorder")},children:[(0,i.jsx)("h1",{className:"mb-4 text-xl",children:"Payment Method"}),["PayPal","Stripe","CashOnDelivery"].map((function(e){return(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("input",{name:"paymentMethod",className:"p-2 outline-none focus:ring-0",id:e,type:"radio",checked:t===e,onChange:function(){return n(e)}}),(0,i.jsx)("label",{className:"p-2",htmlFor:e,children:e})]},e)})),(0,i.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,i.jsx)("button",{onClick:function(){return b.push("/shipping")},type:"button",className:"default-button",children:"Back"}),(0,i.jsx)("button",{className:"primary-button",children:"Next"})]})]})]})}m.auth=!0}},function(e){e.O(0,[956,774,888,179],(function(){return t=7864,e(e.s=t);var t}));var t=e.O();_N_E=t}]);